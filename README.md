# üåâ K√ñRP√ú v7.0

**–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä ‚Äî Telegram Web App**

K√ñRP√ú (–∞–∑–µ—Ä–±. ¬´–º–æ—Å—Ç¬ª) ‚Äî real-time –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å WebSocket-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–∞–∫ Telegram Mini App. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –¥—Ä—É–∑—å—è, –≥—Ä—É–ø–ø—ã, –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –º–∏–Ω–∏-–∏–≥—Ä—ã, —Å–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

![Node.js](https://img.shields.io/badge/Node.js-18+-339933?logo=nodedotjs&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15+-4169E1?logo=postgresql&logoColor=white)
![WebSocket](https://img.shields.io/badge/WebSocket-Real--time-010101?logo=socketdotio)
![Telegram](https://img.shields.io/badge/Telegram-Mini_App-26A5E4?logo=telegram)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üí¨ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (WebSocket)
- –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã —Å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —á–∏—Å–ª–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø–ª–µ–µ—Ä–æ–º
- –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (reply) —Å —Ü–∏—Ç–∞—Ç–æ–π
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
- –î–æ—Å—Ç–∞–≤–∫–∞ ‚úì –∏ –ø—Ä–æ—á—Ç–µ–Ω–∏–µ ‚úì‚úì
- –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (üëç ‚ù§Ô∏è üòÇ üòÆ üò¢ üî•)
- –≠–º–æ–¥–∑–∏-–ø–∞–Ω–µ–ª—å (40 —ç–º–æ–¥–∑–∏)

### üë• –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –°–∏—Å—Ç–µ–º–∞ –¥—Ä—É–∑–µ–π (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ / —É–¥–∞–ª–µ–Ω–∏–µ)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∏–º–µ–Ω–∏ –∏ –ª–æ–≥–∏–Ω—É
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ ¬´–û —Å–µ–±–µ¬ª (–±–∏–æ)
- –°–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å—Ç–∞—Ç—É—Å–∞

### üèÜ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π** (1‚Äì10) —Å XP-–ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
  - +2 XP –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - +3 XP –∑–∞ –≥–æ–ª–æ—Å–æ–≤–æ–µ
  - +10 XP –∑–∞ –ø–æ–±–µ–¥—É –≤ –∏–≥—Ä–µ
- **–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞** ‚Äî –≤—ã–∑–æ–≤ –¥—Ä—É–∑–µ–π –Ω–∞ –¥—É—ç–ª—å
- **–û–ø—Ä–æ—Å—ã / –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è** –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–±–µ–¥ –∏ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä

### üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤–∞—Ç–∞—Ä (16 –∂–∏–≤–æ—Ç–Ω—ã—Ö-—ç–º–æ–¥–∑–∏)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å (–û–Ω–ª–∞–π–Ω, –û—Ç–¥—ã—Ö–∞—é, –ó–∞–Ω—è—Ç, –ò–≥—Ä–∞—é...)
- –°—á—ë—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–Ω–µ–π –≤ —á–∞—Ç–µ, –¥—Ä—É–∑–µ–π
- XP-–ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —É—Ä–æ–≤–µ–Ω—å
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä (–≤—ã–∏–≥—Ä—ã—à–∏ / –≤—Å–µ–≥–æ / % –ø–æ–±–µ–¥)
- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∏–∑–∏—Ç–∞

### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º (PBKDF2 + salt)
- –ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤ localStorage)
- –ê–Ω–æ–Ω–∏–º–Ω—ã–π —Ä–µ–∂–∏–º (–≥–æ—Å—Ç—å —Å –Ω–∏–∫–Ω–µ–π–º–æ–º)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ (kick –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–µ—Å—Å–∏–∏)

### üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –¢—ë–º–Ω–∞—è / —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
- Glassmorphism –¥–∏–∑–∞–π–Ω
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- Telegram Safe Area –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- Fullscreen —Ä–µ–∂–∏–º
- Splash screen —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     WebSocket      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ                      ‚îÇ
‚îÇ   Client (HTML/JS)   ‚îÇ                    ‚îÇ   Node.js Server     ‚îÇ
‚îÇ                      ‚îÇ     HTTP/REST      ‚îÇ                      ‚îÇ
‚îÇ   Telegram Web App   ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ   WebSocket (ws)     ‚îÇ
‚îÇ   GitHub Pages       ‚îÇ                    ‚îÇ   Render.com         ‚îÇ
‚îÇ                      ‚îÇ                    ‚îÇ                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                       ‚îÇ
                                                       ‚ñº
                                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                            ‚îÇ    PostgreSQL DB      ‚îÇ
                                            ‚îÇ    (Render / Neon)    ‚îÇ
                                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
korpu/
‚îú‚îÄ‚îÄ index.html          # –ö–ª–∏–µ–Ω—Ç (Single Page App)
‚îú‚îÄ‚îÄ logo.png            # –õ–æ–≥–æ—Ç–∏–ø
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ korpu-server/
    ‚îú‚îÄ‚îÄ server.js       # WebSocket + HTTP —Å–µ—Ä–≤–µ—Ä
    ‚îú‚îÄ‚îÄ package.json
    ‚îî‚îÄ‚îÄ .env            # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

–°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (Render, Neon, Railway –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ).
–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

### 2. –°–µ—Ä–≤–µ—Ä

```bash
cd korpu-server
npm init -y
npm install ws pg
```

–°–æ–∑–¥–∞–π—Ç–µ `.env`:

```env
DATABASE_URL=postgresql://user:password@host:5432/korpu
PORT=9000
ADMIN_KEY=your_secret_key
CHANGELOG=üî• K√ñRP√ú v7.0 ‚Äî –ù–æ–≤—ã–µ —Ñ–∏—á–∏!
```

–ó–∞–ø—É—Å–∫:

```bash
node server.js
```

### 3. –ö–ª–∏–µ–Ω—Ç

–í `index.html` –∏–∑–º–µ–Ω–∏—Ç–µ WebSocket URL –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä:

```javascript
const WS = 'wss://your-server.onrender.com';
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ GitHub Pages.

### 4. Telegram Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ Web App —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather):

```
/newbot ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞
/newapp ‚Üí URL: https://yourusername.github.io/korpu/
```

---

## üåê API Reference

### HTTP Endpoints

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `GET` | `/` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ (–≤–µ—Ä—Å–∏—è, –æ–Ω–ª–∞–π–Ω) |
| `GET` | `/changelog` | –¢–µ–∫—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `GET` | `/online` | –°–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `GET` | `/search?q=text` | –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∏–º–µ–Ω–∏/–ª–æ–≥–∏–Ω—É |
| `GET` | `/profile?id=login` | –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π |
| `GET` | `/admin/users?key=KEY` | –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (admin) |
| `GET` | `/admin/resetpass?key=KEY&login=X&newpass=Y` | –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è (admin) |
| `GET` | `/admin/deleteuser?key=KEY&login=X` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin) |

### WebSocket Events

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –¢–∏–ø | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ü–æ–ª—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|------|----------|
| `auth_register` | ‚Üí Server | `login, password, displayName, avatar` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `auth_login` | ‚Üí Server | `login, password` | –í—Ö–æ–¥ |
| `guest_login` | ‚Üí Server | `nickname` | –ê–Ω–æ–Ω–∏–º–Ω—ã–π –≤—Ö–æ–¥ |
| `auth_success` | ‚Üê Server | `id, displayName, isGuest, avatar, status, xp, level` | –£—Å–ø–µ—Ö |
| `auth_error` | ‚Üê Server | `text` | –û—à–∏–±–∫–∞ |
| `kicked` | ‚Üê Server | ‚Äî | –°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ |

#### –°–æ–æ–±—â–µ–Ω–∏—è

| –¢–∏–ø | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ü–æ–ª—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|------|----------|
| `connect` | ‚Üí Server | `target` | –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
| `connected` | ‚Üê Server | `peer, displayName, avatar` | –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ |
| `message` | ‚Üî | `target, text, msgId, replyTo?, replyText?` | –õ–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `voice` | ‚Üî | `target, audio, duration, msgId` | –ì–æ–ª–æ—Å–æ–≤–æ–µ (base64) |
| `group_message` | ‚Üî | `groupId, text, msgId, replyTo?, replyText?` | –ì—Ä—É–ø–ø–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `typing` | ‚Üí Server | `target` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ |
| `delivered` | ‚Üê Server | `msgId` | –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ |
| `read` | ‚Üî | `target, msgId` | –ü—Ä–æ—á–∏—Ç–∞–Ω–æ |
| `reaction` | ‚Üî | `target, msgId, emoji` | –†–µ–∞–∫—Ü–∏—è |

#### –î—Ä—É–∑—å—è –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

| –¢–∏–ø | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ü–æ–ª—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|------|----------|
| `add_friend` | ‚Üí Server | `login` | –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞ |
| `remove_friend` | ‚Üí Server | `login` | –£–¥–∞–ª–∏—Ç—å |
| `get_friends` | ‚Üí Server | ‚Äî | –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ |
| `friends_list` | ‚Üê Server | `friends[]` | –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π |
| `friend_added_you` | ‚Üê Server | `from, displayName` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ |
| `block_user` | ‚Üí Server | `login` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å |
| `unblock_user` | ‚Üí Server | `login` | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å |
| `get_blocks` | ‚Üí Server | ‚Äî | –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ |
| `block_list` | ‚Üê Server | `blocked[]` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ |

#### –ì—Ä—É–ø–ø—ã

| –¢–∏–ø | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ü–æ–ª—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|------|----------|
| `create_group` | ‚Üí Server | `name, members[], avatar?` | –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É |
| `get_groups` | ‚Üí Server | ‚Äî | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≥—Ä—É–ø–ø—ã |
| `groups_list` | ‚Üê Server | `groups[]` | –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø |
| `group_created` | ‚Üê Server | `groupId, name` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ |

#### –ò–≥—Ä—ã –∏ –æ–ø—Ä–æ—Å—ã

| –¢–∏–ø | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ü–æ–ª—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|------|----------|
| `rps_invite` | ‚Üí Server | `target` | –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤ –ö–ù–ë |
| `rps_choice` | ‚Üí Server | `target, choice` | rock / paper / scissors |
| `rps_result` | ‚Üê Server | `opponent, myChoice, opChoice, result` | –†–µ–∑—É–ª—å—Ç–∞—Ç |
| `poll_create` | ‚Üí Server | `groupId, question, options[]` | –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å |
| `poll_vote` | ‚Üí Server | `groupId, pollId, option` | –ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å |

#### –ü—Ä–æ—Ñ–∏–ª—å

| –¢–∏–ø | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ü–æ–ª—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|------|----------|
| `update_status` | ‚Üí Server | `status` | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å |
| `update_bio` | ‚Üí Server | `bio` | –û–±–Ω–æ–≤–∏—Ç—å ¬´–û —Å–µ–±–µ¬ª |
| `xp_update` | ‚Üê Server | `xp, level` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ XP |
| `online_list` | ‚Üê Server | `users[]` | –°–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω |

---

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü

```sql
CREATE TABLE users (
  login VARCHAR(50) PRIMARY KEY,
  display_name VARCHAR(100) NOT NULL,
  password_hash VARCHAR(256) NOT NULL,
  password_salt VARCHAR(64) NOT NULL,
  avatar VARCHAR(20) DEFAULT 'üê±',
  status VARCHAR(30) DEFAULT '–û–Ω–ª–∞–π–Ω',
  xp INTEGER DEFAULT 0,
  level INTEGER DEFAULT 1,
  messages_count INTEGER DEFAULT 0,
  bio VARCHAR(200) DEFAULT '',
  games_won INTEGER DEFAULT 0,
  games_played INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  last_login TIMESTAMP DEFAULT NOW()
);

CREATE TABLE friends (
  user_login VARCHAR(50) NOT NULL,
  friend_login VARCHAR(50) NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY (user_login, friend_login)
);

CREATE TABLE blocks (
  user_login VARCHAR(50) NOT NULL,
  blocked_login VARCHAR(50) NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY (user_login, blocked_login)
);

CREATE TABLE groups (
  id VARCHAR(20) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  owner VARCHAR(50) NOT NULL,
  avatar VARCHAR(20) DEFAULT 'üë•',
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE group_members (
  group_id VARCHAR(20) NOT NULL,
  user_login VARCHAR(50) NOT NULL,
  PRIMARY KEY (group_id, user_login)
);
```

---

## üèÜ –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π

| –£—Ä–æ–≤–µ–Ω—å | XP | –ü—Ä–∏–º–µ—Ä–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π |
|---------|----|--------------------|
| 1 | 0 | ‚Äî |
| 2 | 50 | ~25 |
| 3 | 150 | ~75 |
| 4 | 300 | ~150 |
| 5 | 500 | ~250 |
| 6 | 800 | ~400 |
| 7 | 1 200 | ~600 |
| 8 | 1 800 | ~900 |
| 9 | 2 500 | ~1 250 |
| 10 | 3 500 | ~1 750 |

---

## üîß –î–µ–ø–ª–æ–π

### Render.com (—Å–µ—Ä–≤–µ—Ä)

1. **Web Service** ‚Üí –ø–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. Build Command: `npm install`
3. Start Command: `node server.js`
4. –î–æ–±–∞–≤—å—Ç–µ **PostgreSQL** –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
5. Environment Variables:
   - `DATABASE_URL` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç PostgreSQL
   - `ADMIN_KEY` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∞–¥–º–∏–Ω–∫–∏

### GitHub Pages (–∫–ª–∏–µ–Ω—Ç)

1. –ü–æ–ª–æ–∂–∏—Ç–µ `index.html` –∏ `logo.png` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. Settings ‚Üí Pages ‚Üí Deploy from branch `main`

### Telegram Mini App

1. @BotFather ‚Üí `/newbot`
2. `/newapp` ‚Üí —É–∫–∞–∂–∏—Ç–µ URL GitHub Pages
3. –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç K√ñRP√ú –∫–∞–∫ Web App

---

## üìã –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ |
|--------|---------------|
| **v7.0** | –ü—Ä–æ—Ñ–∏–ª–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, reply, –ø–æ–∏—Å–∫, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –ö–ù–ë, —É—Ä–æ–≤–Ω–∏, –æ–ø—Ä–æ—Å—ã, –∫–∞—Å—Ç–æ–º–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–ª–µ–µ—Ä |
| **v6.0** | –î—Ä—É–∑—å—è, –≥—Ä—É–ø–ø—ã, changelog, Telegram safe area |
| **v5.0** | –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å—ã, –∞–≤–∞—Ç–∞—Ä—ã |
| **v4.0** | –¢–µ–º—ã, —ç–º–æ–¥–∑–∏, —Ä–µ–∞–∫—Ü–∏–∏, —á–∞—Ç-—Ç–∞–±—ã |
| **v3.0** | PostgreSQL, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è **PBKDF2** —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å–æ–ª—å—é (64 –±–∞–π—Ç–∞)
- –ê–¥–º–∏–Ω-API –∑–∞—â–∏—â—ë–Ω —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –ù–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

<p align="center">
  <b>üåâ K√ñRP√ú</b> ‚Äî –º–æ—Å—Ç –º–µ–∂–¥—É –ª—é–¥—å–º–∏<br>
  <sub>Built with ‚ù§Ô∏è and WebSocket</sub>
</p>
